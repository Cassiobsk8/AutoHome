<!DOCTYPE html>
<meta charset="UTF-8">
<html>

<head>
	<link href='https://fonts.googleapis.com/css?family=Bowlby One' rel='stylesheet'>
	<link rel="stylesheet" type="text/css" href="comm.css" />

	<script src="jquery-3.2.1.min.js"></script>
	<script src="jquery.AshAlom.gaugeMeter-2.0.0.min.js"></script>
	<script src="jquery-asPieProgress.js"></script>

	<script>
		function soundclick() {
			var snd = new Audio("clickm.mp3");
			snd.play();
			snd.currentTime = 0;
		}
	</script>
	<script>
		$(document).ready(function () {
			$(".GaugeMeter").gaugeMeter();
		});
	</script>

	<script>
		function refresh() {
			$(document).ready(function () {
				$.getJSON('test.json', function (data) {
					$('#ipatio').html(data.patio);
					$('#icozinha').html(data.cozinha);
					$('#isala').html(data.sala);
					$('#iescada').html(data.escada);
					$('#iescritorio').html(data.escritorio);
					$('#iquarto').html(data.quarto);

					$('.pie_progress').asPieProgress('go', data.gtemp);
					$('.pie_progress2').asPieProgress('go', data.glum);
					var datagpres = (data.gpres * 100)
					$('.pie_progress3').asPieProgress('go', datagpres);

					if (data.patio == "LIGADA") {
						$('#bpatio').css('background', 'rgba(0, 255, 0, 0.2)');
					} else {
						$('#bpatio').css('background', 'rgba(255, 0, 0, 0.2)');
					};
					if (data.cozinha == "LIGADA") {
						$('#bcozinha').css('background', 'rgba(0, 255, 0, 0.2)');
					} else {
						$('#bcozinha').css('background', 'rgba(255, 0, 0, 0.2)');
					};
					if (data.sala == "LIGADA") {
						$('#bsala').css('background', 'rgba(0, 255, 0, 0.2)');
					} else {
						$('#bsala').css('background', 'rgba(255, 0, 0, 0.2)');
					};
					if (data.escada == "LIGADA") {
						$('#bescada').css('background', 'rgba(0, 255, 0, 0.2)');
					} else {
						$('#bescada').css('background', 'rgba(255, 0, 0, 0.2)');
					};
					if (data.escritorio == "LIGADA") {
						$('#bescritorio').css('background', 'rgba(0, 255, 0, 0.2)');
					} else {
						$('#bescritorio').css('background', 'rgba(255, 0, 0, 0.2)');
					};
					if (data.quarto == "LIGADA") {
						$('#bquarto').css('background', 'rgba(0, 255, 0, 0.2)');
					} else {
						$('#bquarto').css('background', 'rgba(255, 0, 0, 0.2)');
					};
				});
			})
			setTimeout(refresh, 500);
		}
		refresh();
	</script>

	<script type="text/javascript">
		jQuery(function ($) {
			$('.pie_progress').asPieProgress({
				namespace: 'pie_progress',
				min: 0,
				max: 100,
				speed: 28,
				barcolor: 'green',
				trackcolor: '#202020',
				barsize: '10',
				easing: 'linear',
				numberCallback(n) {
					'use strict';
					const percentage = Math.round(this.getPercentage(n));
					return `${percentage} °C`;
				},
			});
			$('.pie_progress2').asPieProgress({
				namespace: 'pie_progress2',
				min: 0,
				max: 100,
				speed: 28,
				barcolor: 'green',
				trackcolor: '#202020',
				barsize: '10',
				easing: 'linear',
				numberCallback(n) {
					'use strict';
					const percentage = Math.round(this.getPercentage(n));
					return `${percentage} %`;
				},
			});
			$('.pie_progress3').asPieProgress({
				namespace: 'pie_progress3',
				min: 0,
				max: 100,
				speed: 10,
				barcolor: 'green',
				trackcolor: '#202020',
				barsize: '10',
				easing: 'ease',
				numberCallback(n) {
					'use strict';
					const percentage = Math.round(this.getPercentage(n));
					return `P`;
				},
			});
		});
	</script>

</head>

<body>
	<div id="container">


		<button class="button buttont" onclick="soundclick(); testt()">DESLIGAR TODAS AS LUZES</button>


		<div id="esq">
			<div id="esqtop">
				<div class="floating-box"></div>
				<h1>
					LAMPADAS
				</h1>
				<div class="floating-box"></div>
			</div>
			<div id="esqmid">
				<button class="button" onclick="soundclick()">PATIO</button>
				<i class="right"></i>
				<h2 id="bpatio">
					<div id="ipatio">ERRO</div>
				</h2>
				<button class="button" onclick="soundclick()">COZINHA</button>
				<i class="right"></i>
				<h2 id="bcozinha">
					<div id="icozinha">ERRO</div>
				</h2>
				<button class="button" onclick="soundclick()">SALA</button>
				<i class="right"></i>
				<h2 id="bsala">
					<div id="isala">ERRO</div>
				</h2>
				<button class="button disabled" onclick="soundclick()">ESCADA</button>
				<i class="right"></i>
				<h2 id="bescada">
					<div id="iescada">ERRO</div>
				</h2>
			</div>
			<div id="esqbot">
				<button class="button disabled" onclick="soundclick()">ESCRITÓRIO</button>
				<i class="right"></i>
				<h2 id="bescritorio">
					<div id="iescritorio">ERRO</div>
				</h2>
				<button class="button disabled" onclick="soundclick()">QUARTO</button>
				<i class="right"></i>
				<h2 id="bquarto">
					<div id="iquarto">ERRO</div>
				</h2>
			</div>
		</div>
		<div id="dir">
			<div id="dirtop">
				<div class="floating-box2"></div>
				<h1>
					TEMPERATURA
				</h1>
				<div class="floating-box3"></div>
				<h1>
					LUMINSIDADE
				</h1>
				<div class="floating-box3"></div>
				<h1>
					PRESENÇA
				</h1>
				<div class="floating-box2"></div>
				<p></p>
				<div id="gauge1">
					<div class="pie_progress" role="progressbar">
						<span class="pie_progress__number">0°C</span>
					</div>
				</div>
				<div id="gauge2">
					<div class="pie_progress2" role="progressbar">
						<span class="pie_progress__number">0°C</span>
					</div>
				</div>
				<div id="gauge3">
					<div class="pie_progress3" role="progressbar">
						<span class="pie_progress__number">P</span>
					</div>
				</div>
			</div>
			<div id="dirmid">
				<div class="floating-box4"></div>
				<h1>
					SOON
				</h1>
				<div class="floating-box4"></div>
				<p></p>
				<div id="gauge4">
					<div class="GaugeMeter" id="GaugeMeter_4" data-used="1" data-total="1" data-stripe="0" data-back="black" data-color="CornflowerBlue "
					 data-text="T" data-label="TESTE" data-label_color="white" data-size="200" data-width="0">
					</div>
					<button class="button buttong" onclick="soundclick()"></button>
				</div>
				<div id="gauge4">
					<div class="GaugeMeter" id="GaugeMeter_5" data-used="1" data-total="1" data-stripe="0" data-back="black" data-color="CornflowerBlue "
					 data-text="T" data-label="TESTE" data-label_color="white" data-size="200" data-width="0">
					</div>
					<button class="button buttong" onclick="soundclick()"></button>
				</div>
				<div id="gauge4">
					<div class="GaugeMeter" id="GaugeMeter_6" data-used="1" data-total="1" data-stripe="0" data-back="black" data-color="CornflowerBlue "
					 data-text="T" data-label="TESTE" data-label_color="white" data-size="200" data-width="0">
					</div>
					<button class="button buttong" onclick="soundclick()"></button>
				</div>
				<div id="gauge4">
					<div class="GaugeMeter" id="GaugeMeter_7" data-used="1" data-total="1" data-stripe="0" data-back="black" data-color="CornflowerBlue "
					 data-text="T" data-label="TESTE" data-label_color="white" data-size="200" data-width="0">
					</div>
					<button class="button buttong" onclick="soundclick()"></button>
				</div>
			</div>
			<div id="dirbot">

			</div>
		</div>
	</div>
</body>

</html>